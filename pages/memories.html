<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Love Story - Every Moment With You üíú</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <script src="../js/config-loader.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-attachment: fixed;
            overflow-x: hidden;
            min-height: 100vh;
        }
        .title-font {
            font-family: 'Playfair Display', serif;
        }
        .script-font {
            font-family: 'Dancing Script', cursive;
        }
        
        /* Floating Hearts Animation */
        .floating-hearts {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            animation: floatUp 6s ease-in infinite;
            opacity: 0;
        }

        @keyframes floatUp {
            0% { opacity: 0; transform: translateY(0) scale(1); }
            50% { opacity: 0.8; }
            100% { opacity: 0; transform: translateY(-1000px) scale(1.5); }
        }

        .fade-in {
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Polaroid Gallery Grid */
        .gallery-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            columns: 3 300px;
            column-gap: 40px;
        }

        .polaroid-card {
            break-inside: avoid;
            background: white;
            padding: 15px 15px 40px 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            margin-bottom: 40px;
            transform: rotate(var(--rotation));
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            position: relative;
            border-radius: 2px;
        }

        .polaroid-card:hover {
            transform: scale(1.05) rotate(0deg) !important;
            z-index: 10;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .polaroid-image {
            width: 100%;
            height: auto;
            display: block;
            filter: sepia(10%);
            transition: filter 0.3s;
        }

        .polaroid-card:hover .polaroid-image {
            filter: sepia(0%);
        }

        .polaroid-caption {
            font-family: 'Dancing Script', cursive;
            font-size: 24px;
            color: #4a5568;
            text-align: center;
            margin-top: 20px;
            line-height: 1.2;
        }

        .polaroid-date {
            font-family: 'Inter', sans-serif;
            font-size: 12px;
            color: #a0aec0;
            text-align: center;
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pin {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23e53e3e"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><circle cx="12" cy="9" r="2.5" fill="%239b2c2c"/></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            z-index: 5;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.3));
        }

        /* Lightbox */
        .lightbox {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 20px;
        }

        .lightbox.active {
            display: flex;
            opacity: 1;
        }

        .lightbox-content {
            max-width: 1000px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .lightbox-media-container {
            max-height: 70vh;
            width: auto;
            max-width: 100%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(255,255,255,0.1);
        }

        .lightbox-media {
            max-height: 70vh;
            max-width: 100%;
            object-fit: contain;
        }

        .lightbox-details {
            color: white;
            text-align: center;
            margin-top: 20px;
            max-width: 600px;
        }

        .lightbox-title {
            font-family: 'Playfair Display', serif;
            font-size: 32px;
            margin-bottom: 10px;
        }

        .lightbox-story {
            font-size: 16px;
            line-height: 1.6;
            opacity: 0.9;
        }

        .lightbox-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 40px;
            cursor: pointer;
            background: none;
            border: none;
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.1);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .lightbox-nav:hover {
            background: rgba(255,255,255,0.3);
        }

        .lightbox-prev { left: -60px; }
        .lightbox-next { right: -60px; }

        @media (max-width: 768px) {
            .gallery-container {
                columns: 1;
            }
            .lightbox-nav {
                position: fixed;
                bottom: 20px;
                top: auto;
                transform: none;
            }
            .lightbox-prev { left: 20px; }
            .lightbox-next { right: 20px; }
            .lightbox-close { top: 10px; right: 10px; position: fixed; }
        }
    </style>
</head>
<body>
    <!-- Floating Hearts Background -->
    <div class="floating-hearts" id="hearts-container"></div>

    <!-- Main Container -->
    <div class="relative z-10 pb-20">
        <!-- Header -->
        <div class="text-center py-16 fade-in px-4">
            <h1 class="text-5xl md:text-7xl font-bold title-font text-white mb-4 drop-shadow-lg">
                Our Memory Wall üì∏
            </h1>
            <p class="text-xl md:text-2xl script-font text-white opacity-90 drop-shadow-md">
                Snapshots of a love that grows stronger every day
            </p>
        </div>

        <!-- Gallery Grid -->
        <div class="gallery-container" id="gallery">
            <!-- Items injected by JS -->
        </div>

        <!-- Footer -->
        <div class="text-center mt-12 px-4">
            <div class="glass-card max-w-2xl mx-auto p-8 mb-6 rounded-2xl bg-white/10 backdrop-blur-md border border-white/20">
                <p class="text-xl text-white italic mb-3">
                    "Every picture tells a story, but ours is my favorite."
                </p>
                <p class="text-white/80 mb-2">
                    Happy <span data-config-text="anniversaryText">Three-Month</span> Anniversary, My Love üíú
                </p>
            </div>
            
            <a href="../index.html" 
               class="inline-block px-8 py-4 bg-white text-purple-600 rounded-full font-semibold text-lg hover:bg-purple-50 transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105">
                ‚Üê Back to Home
            </a>
        </div>
    </div>

    <!-- Lightbox Modal -->
    <div class="lightbox" id="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" onclick="closeLightbox()">&times;</button>
            
            <div class="lightbox-media-container">
                <!-- Media injected here -->
                <img src="" class="lightbox-media" id="lightbox-img">
                <video src="" class="lightbox-media" id="lightbox-video" controls style="display:none"></video>
            </div>

            <div class="lightbox-details">
                <h2 class="lightbox-title" id="lightbox-title">Title</h2>
                <p class="lightbox-story" id="lightbox-story">Story goes here...</p>
                <p class="text-sm mt-4 opacity-70" id="lightbox-date">Date</p>
            </div>

            <button class="lightbox-nav lightbox-prev" onclick="changeSlide(-1)">‚ùÆ</button>
            <button class="lightbox-nav lightbox-next" onclick="changeSlide(1)">‚ùØ</button>
        </div>
    </div>

    <script>
        // Memory Data
        const memories = [
            {
                type: 'image',
                src: '../img/20250913_182321.jpg',
                date: 'September 13, 2025',
                title: 'The Day Everything Changed',
                story: 'I remember this moment like it was yesterday. The way you smiled, the way the light caught your eyes... I knew then that you were someone special. Someone I wanted to know forever.'
            },
            {
                type: 'video',
                src: '../video/VID-20250910-WA0009.mp4',
                date: 'September 10, 2025',
                title: 'Your Laughter',
                story: 'This video captures what I love most - your genuine laughter. Every time I hear it, my world gets brighter. You have this way of making even the simplest moments feel magical.'
            },
            {
                type: 'image',
                src: '../img/IMG-20250914-WA0019.jpg',
                date: 'September 14, 2025',
                title: 'Natural Beauty',
                story: 'You don\'t even realize how beautiful you are. It\'s not just what I see, but who you are - your kindness, your strength, your faith. Everything about you draws me closer.'
            },
            {
                type: 'image',
                src: '../img/IMG-20250914-WA0020.jpg',
                date: 'September 14, 2025',
                title: 'Those Eyes',
                story: 'When you look at me, I feel seen. Really seen. Not just for who I am today, but for who I\'m becoming. Thank you for seeing me, Ayomide. Thank you for believing in us.'
            },
            {
                type: 'image',
                src: '../img/20250916_173540.jpg',
                date: 'September 16, 2025',
                title: 'My Oluwasetemi',
                story: 'Oluwasetemi - "God supports me." That\'s who you are to me. My support, my strength, my Firelighter. Every day with you feels like a gift I didn\'t know I was waiting for.'
            },
            {
                type: 'image',
                src: '../img/IMG-20250914-WA0024.jpg',
                date: 'September 14, 2025',
                title: 'Radiant Smile',
                story: 'Your smile could light up the darkest room. It lights up my life. When you\'re happy, I\'m happy. Your joy is contagious, and I want to spend forever making you smile like this.'
            },
            {
                type: 'image',
                src: '../img/IMG-20250914-WA0028.jpg',
                date: 'September 14, 2025',
                title: 'Grace and Elegance',
                story: 'There\'s something about the way you carry yourself - graceful, confident, beautiful. You command attention without even trying. I\'m so proud to call you mine, Oluwasetemi.'
            },
            {
                type: 'video',
                src: '../video/VID-20251007-WA0001.mp4',
                date: 'September 7, 2025',
                title: 'The Day Before Forever',
                story: 'One day before we became official. I was nervous, excited, sure. This video reminds me of that anticipation - knowing something beautiful was about to begin. And it did. We did.'
            },
            {
                type: 'image',
                src: '../img/IMG-20250914-WA0032.jpg',
                date: 'September 14, 2025',
                title: 'My Odunayo',
                story: 'Odunayo - "Sweetness has arrived." You are exactly that. My sweetness, my joy, my treasure. I promise to honor you, cherish you, and love you with everything I have. You deserve the world.'
            },
            {
                type: 'image',
                src: '../img/IMG-20250914-WA0038.jpg',
                date: 'September 14, 2025',
                title: 'Forever Starts Now',
                story: 'This is just the beginning, my love. {{anniversaryDurationText}} down, a lifetime to go. Every photo, every video, every moment we share is another chapter in our story. And I can\'t wait to write them all with you. I love you, Ayomide. Always. - Your LumLum üíú'
            }
        ];

        let currentLightboxIndex = 0;

        async function initGallery() {
            const cfg = await window.SITE_CONFIG_READY;
            const durationText = cfg?.anniversaryDurationText || 'Three months';

            const gallery = document.getElementById('gallery');
            
            memories.forEach((mem, index) => {
                // Dynamic Text Replacement
                if (mem.story) mem.story = mem.story.replace('{{anniversaryDurationText}}', durationText);

                const card = document.createElement('div');
                card.className = 'polaroid-card fade-in';
                card.style.animationDelay = (index * 0.1) + 's';
                
                // Random rotation between -3 and 3 degrees
                const rotation = Math.random() * 6 - 3;
                card.style.setProperty('--rotation', rotation + 'deg');
                
                card.onclick = () => openLightbox(index);

                let mediaHtml = '';
                if (mem.type === 'image') {
                    mediaHtml = `<img src="${mem.src}" class="polaroid-image" alt="${mem.title}">`;
                } else {
                    mediaHtml = `
                        <div style="position:relative">
                            <video src="${mem.src}" class="polaroid-image" style="object-fit:cover; height:250px;"></video>
                            <div style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:40px; color:white; text-shadow:0 2px 4px rgba(0,0,0,0.5);">‚ñ∂</div>
                        </div>
                    `;
                }

                card.innerHTML = `
                    <div class="pin"></div>
                    ${mediaHtml}
                    <div class="polaroid-caption">${mem.title}</div>
                    <div class="polaroid-date">${mem.date}</div>
                `;

                gallery.appendChild(card);
            });
        }

        function openLightbox(index) {
            currentLightboxIndex = index;
            updateLightbox();
            document.getElementById('lightbox').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
            document.body.style.overflow = 'auto';
            // Stop video
            const v = document.getElementById('lightbox-video');
            v.pause();
        }

        function changeSlide(dir) {
            currentLightboxIndex += dir;
            if (currentLightboxIndex >= memories.length) currentLightboxIndex = 0;
            if (currentLightboxIndex < 0) currentLightboxIndex = memories.length - 1;
            updateLightbox();
        }

        function updateLightbox() {
            const mem = memories[currentLightboxIndex];
            const img = document.getElementById('lightbox-img');
            const vid = document.getElementById('lightbox-video');
            
            // Reset
            img.style.display = 'none';
            vid.style.display = 'none';
            vid.pause();

            if (mem.type === 'image') {
                img.src = mem.src;
                img.style.display = 'block';
            } else {
                vid.src = mem.src;
                vid.style.display = 'block';
                vid.play();
            }

            document.getElementById('lightbox-title').textContent = mem.title;
            document.getElementById('lightbox-story').textContent = mem.story;
            document.getElementById('lightbox-date').textContent = mem.date;
        }

        // Keyboard nav
        document.addEventListener('keydown', (e) => {
            if (!document.getElementById('lightbox').classList.contains('active')) return;
            if (e.key === 'Escape') closeLightbox();
            if (e.key === 'ArrowLeft') changeSlide(-1);
            if (e.key === 'ArrowRight') changeSlide(1);
        });

        // Floating Hearts
        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = 'üíú';
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
            heart.style.animationDelay = Math.random() * 2 + 's';
            document.getElementById('hearts-container').appendChild(heart);
            setTimeout(() => heart.remove(), 8000);
        }

        window.onload = () => {
            initGallery();
            setInterval(createHeart, 800);
        };
    </script>
    <script src="../js/confetti.js"></script>
    <script src="../js/music.js"></script>
    <script src="../js/theme.js"></script>
    <script src="../js/notes.js"></script>
</body>
</html>